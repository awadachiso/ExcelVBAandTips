<!DOCTYPE html>
<meta charset=UTF8 lang=ja>
<input type="file" id="readButton">

<script>
  let readButton;
  readButton = document.getElementById("readButton");
  readButton.addEventListener("change",()=>{
    upload();
    },false);
    
    
    
  function upload(evt) {
    // 2：FileAPIがブラウザに対応してるかcheckFileReader関数でチェック
    if (!checkFileReader()) {
        alert("エラー：FileAPI非対応のブラウザです。");
    }else{
      // 3: 選択されたファイル情報を取得
      let file = event.target.files[0]; 
      
      //readerオブジェクトを作成
      let reader = new FileReader();
      
      // ファイル読み取りを実行
      reader.readAsText(file);
      
      reader.onload = function(event) {
        let result = event.target.result;
        printLine(result);

      };
    
      //読み込めなかった場合のエラー処理
      reader.onerror = function() {
        alert("エラー：ファイルをロードできません。");
      };
    }
  }
  
  function printLine(csvdata) {
    //5:csvデータを1行ごとに配列にする
    let temp = csvdata.split("\r\n");
    let t;
    let arr = new Array();
    temp.forEach((t)=>{
      //console.log(t.split(",")[1]);
      arr.push(t.split(",")[1]);
      }
    )
    console.log(arr);
  }

  function checkFileReader() {
    var isUse = false;
    if (window.File && window.FileReader && window.FileList && window.Blob) {
      isUse = true;
    }
    return isUse;
  }

</script>